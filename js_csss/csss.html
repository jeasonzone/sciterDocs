<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSSS!脚本 | Sciter优化文档</title>
    <meta name="description" content="基于原sciter文档的优化">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/sciterDocs/logo.ico">
    
    <link rel="preload" href="/sciterDocs/assets/css/0.styles.9c608cc4.css" as="style"><link rel="preload" href="/sciterDocs/assets/js/app.44b9e7e1.js" as="script"><link rel="preload" href="/sciterDocs/assets/js/2.e6e0d827.js" as="script"><link rel="preload" href="/sciterDocs/assets/js/52.da9c9fd9.js" as="script"><link rel="prefetch" href="/sciterDocs/assets/js/10.de274bb9.js"><link rel="prefetch" href="/sciterDocs/assets/js/100.2f3c6b94.js"><link rel="prefetch" href="/sciterDocs/assets/js/101.41b0ba8b.js"><link rel="prefetch" href="/sciterDocs/assets/js/102.243d107b.js"><link rel="prefetch" href="/sciterDocs/assets/js/103.49baab6b.js"><link rel="prefetch" href="/sciterDocs/assets/js/104.f525157d.js"><link rel="prefetch" href="/sciterDocs/assets/js/105.6e23eef2.js"><link rel="prefetch" href="/sciterDocs/assets/js/106.e7a41717.js"><link rel="prefetch" href="/sciterDocs/assets/js/107.ded304e9.js"><link rel="prefetch" href="/sciterDocs/assets/js/108.da4df5cd.js"><link rel="prefetch" href="/sciterDocs/assets/js/109.8d716f80.js"><link rel="prefetch" href="/sciterDocs/assets/js/11.b176fa87.js"><link rel="prefetch" href="/sciterDocs/assets/js/110.0c66913d.js"><link rel="prefetch" href="/sciterDocs/assets/js/111.85775d2b.js"><link rel="prefetch" href="/sciterDocs/assets/js/112.86ad6c98.js"><link rel="prefetch" href="/sciterDocs/assets/js/113.ef5a7e0b.js"><link rel="prefetch" href="/sciterDocs/assets/js/114.ed201f9e.js"><link rel="prefetch" href="/sciterDocs/assets/js/115.6f22c6d3.js"><link rel="prefetch" href="/sciterDocs/assets/js/116.19777361.js"><link rel="prefetch" href="/sciterDocs/assets/js/117.5dec80f9.js"><link rel="prefetch" href="/sciterDocs/assets/js/118.3d91092b.js"><link rel="prefetch" href="/sciterDocs/assets/js/119.8b28986b.js"><link rel="prefetch" href="/sciterDocs/assets/js/12.503eaeb4.js"><link rel="prefetch" href="/sciterDocs/assets/js/120.5f8497bf.js"><link rel="prefetch" href="/sciterDocs/assets/js/121.081e0591.js"><link rel="prefetch" href="/sciterDocs/assets/js/122.ba05cc94.js"><link rel="prefetch" href="/sciterDocs/assets/js/123.1169a941.js"><link rel="prefetch" href="/sciterDocs/assets/js/124.ab926d4d.js"><link rel="prefetch" href="/sciterDocs/assets/js/125.dc68c79e.js"><link rel="prefetch" href="/sciterDocs/assets/js/126.2f42e738.js"><link rel="prefetch" href="/sciterDocs/assets/js/127.4f42f823.js"><link rel="prefetch" href="/sciterDocs/assets/js/128.1253ada8.js"><link rel="prefetch" href="/sciterDocs/assets/js/129.827a1485.js"><link rel="prefetch" href="/sciterDocs/assets/js/13.22672f29.js"><link rel="prefetch" href="/sciterDocs/assets/js/130.0643ef19.js"><link rel="prefetch" href="/sciterDocs/assets/js/131.928aa3f4.js"><link rel="prefetch" href="/sciterDocs/assets/js/14.f582a4e0.js"><link rel="prefetch" href="/sciterDocs/assets/js/15.e2a2d410.js"><link rel="prefetch" href="/sciterDocs/assets/js/16.e682ff53.js"><link rel="prefetch" href="/sciterDocs/assets/js/17.e3c02dea.js"><link rel="prefetch" href="/sciterDocs/assets/js/18.f08586b1.js"><link rel="prefetch" href="/sciterDocs/assets/js/19.d8d22397.js"><link rel="prefetch" href="/sciterDocs/assets/js/20.3d75a728.js"><link rel="prefetch" href="/sciterDocs/assets/js/21.c6805a64.js"><link rel="prefetch" href="/sciterDocs/assets/js/22.8da894a0.js"><link rel="prefetch" href="/sciterDocs/assets/js/23.9bb38182.js"><link rel="prefetch" href="/sciterDocs/assets/js/24.52dce2a6.js"><link rel="prefetch" href="/sciterDocs/assets/js/25.5648f011.js"><link rel="prefetch" href="/sciterDocs/assets/js/26.89dc463f.js"><link rel="prefetch" href="/sciterDocs/assets/js/27.c09e2a2e.js"><link rel="prefetch" href="/sciterDocs/assets/js/28.8c745e4a.js"><link rel="prefetch" href="/sciterDocs/assets/js/29.ccd0682f.js"><link rel="prefetch" href="/sciterDocs/assets/js/3.44806f7c.js"><link rel="prefetch" href="/sciterDocs/assets/js/30.4aa2fcd2.js"><link rel="prefetch" href="/sciterDocs/assets/js/31.703db421.js"><link rel="prefetch" href="/sciterDocs/assets/js/32.cbc96892.js"><link rel="prefetch" href="/sciterDocs/assets/js/33.ead695a9.js"><link rel="prefetch" href="/sciterDocs/assets/js/34.210bbf82.js"><link rel="prefetch" href="/sciterDocs/assets/js/35.cc6bd4ef.js"><link rel="prefetch" href="/sciterDocs/assets/js/36.af0741d8.js"><link rel="prefetch" href="/sciterDocs/assets/js/37.22c09dfa.js"><link rel="prefetch" href="/sciterDocs/assets/js/38.c79cf3b8.js"><link rel="prefetch" href="/sciterDocs/assets/js/39.030710d7.js"><link rel="prefetch" href="/sciterDocs/assets/js/4.631eb29c.js"><link rel="prefetch" href="/sciterDocs/assets/js/40.fd27cbe7.js"><link rel="prefetch" href="/sciterDocs/assets/js/41.62766825.js"><link rel="prefetch" href="/sciterDocs/assets/js/42.a5c26f07.js"><link rel="prefetch" href="/sciterDocs/assets/js/43.b3ceb583.js"><link rel="prefetch" href="/sciterDocs/assets/js/44.60c48a25.js"><link rel="prefetch" href="/sciterDocs/assets/js/45.98a0fd6a.js"><link rel="prefetch" href="/sciterDocs/assets/js/46.7be35d20.js"><link rel="prefetch" href="/sciterDocs/assets/js/47.d52adf80.js"><link rel="prefetch" href="/sciterDocs/assets/js/48.79222ca2.js"><link rel="prefetch" href="/sciterDocs/assets/js/49.500cadc8.js"><link rel="prefetch" href="/sciterDocs/assets/js/5.c9ecec7a.js"><link rel="prefetch" href="/sciterDocs/assets/js/50.214440b3.js"><link rel="prefetch" href="/sciterDocs/assets/js/51.a8f2fbff.js"><link rel="prefetch" href="/sciterDocs/assets/js/53.7c02a5ad.js"><link rel="prefetch" href="/sciterDocs/assets/js/54.a35f6407.js"><link rel="prefetch" href="/sciterDocs/assets/js/55.cb3dd4ca.js"><link rel="prefetch" href="/sciterDocs/assets/js/56.d426b1a4.js"><link rel="prefetch" href="/sciterDocs/assets/js/57.a374b7b0.js"><link rel="prefetch" href="/sciterDocs/assets/js/58.e306c12c.js"><link rel="prefetch" href="/sciterDocs/assets/js/59.582b60c1.js"><link rel="prefetch" href="/sciterDocs/assets/js/6.7c7ef19b.js"><link rel="prefetch" href="/sciterDocs/assets/js/60.2896c82c.js"><link rel="prefetch" href="/sciterDocs/assets/js/61.d7df0142.js"><link rel="prefetch" href="/sciterDocs/assets/js/62.48604ffc.js"><link rel="prefetch" href="/sciterDocs/assets/js/63.a75a2f80.js"><link rel="prefetch" href="/sciterDocs/assets/js/64.0baf1184.js"><link rel="prefetch" href="/sciterDocs/assets/js/65.62da2a15.js"><link rel="prefetch" href="/sciterDocs/assets/js/66.a8b889dd.js"><link rel="prefetch" href="/sciterDocs/assets/js/67.3b37540d.js"><link rel="prefetch" href="/sciterDocs/assets/js/68.91634493.js"><link rel="prefetch" href="/sciterDocs/assets/js/69.1ee19c1a.js"><link rel="prefetch" href="/sciterDocs/assets/js/7.fcddb250.js"><link rel="prefetch" href="/sciterDocs/assets/js/70.a003ab9f.js"><link rel="prefetch" href="/sciterDocs/assets/js/71.9ba10509.js"><link rel="prefetch" href="/sciterDocs/assets/js/72.0de81999.js"><link rel="prefetch" href="/sciterDocs/assets/js/73.3e751fb5.js"><link rel="prefetch" href="/sciterDocs/assets/js/74.932aa838.js"><link rel="prefetch" href="/sciterDocs/assets/js/75.ae054aa6.js"><link rel="prefetch" href="/sciterDocs/assets/js/76.018d3720.js"><link rel="prefetch" href="/sciterDocs/assets/js/77.6c99c1bb.js"><link rel="prefetch" href="/sciterDocs/assets/js/78.c495647c.js"><link rel="prefetch" href="/sciterDocs/assets/js/79.a10c82f1.js"><link rel="prefetch" href="/sciterDocs/assets/js/8.c5a1f576.js"><link rel="prefetch" href="/sciterDocs/assets/js/80.a47845c4.js"><link rel="prefetch" href="/sciterDocs/assets/js/81.26a22511.js"><link rel="prefetch" href="/sciterDocs/assets/js/82.c7dd5277.js"><link rel="prefetch" href="/sciterDocs/assets/js/83.066c2476.js"><link rel="prefetch" href="/sciterDocs/assets/js/84.825a2068.js"><link rel="prefetch" href="/sciterDocs/assets/js/85.089dc4a1.js"><link rel="prefetch" href="/sciterDocs/assets/js/86.b15448a5.js"><link rel="prefetch" href="/sciterDocs/assets/js/87.67c6395f.js"><link rel="prefetch" href="/sciterDocs/assets/js/88.d9132d8b.js"><link rel="prefetch" href="/sciterDocs/assets/js/89.70cacf9b.js"><link rel="prefetch" href="/sciterDocs/assets/js/9.7c0713dd.js"><link rel="prefetch" href="/sciterDocs/assets/js/90.4b4def09.js"><link rel="prefetch" href="/sciterDocs/assets/js/91.bc6db15e.js"><link rel="prefetch" href="/sciterDocs/assets/js/92.57897042.js"><link rel="prefetch" href="/sciterDocs/assets/js/93.3144c87a.js"><link rel="prefetch" href="/sciterDocs/assets/js/94.e0471db7.js"><link rel="prefetch" href="/sciterDocs/assets/js/95.dcb7dac6.js"><link rel="prefetch" href="/sciterDocs/assets/js/96.9cf440f6.js"><link rel="prefetch" href="/sciterDocs/assets/js/97.946663d4.js"><link rel="prefetch" href="/sciterDocs/assets/js/98.e3573176.js"><link rel="prefetch" href="/sciterDocs/assets/js/99.ec657a18.js">
    <link rel="stylesheet" href="/sciterDocs/assets/css/0.styles.9c608cc4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/sciterDocs/" class="home-link router-link-active"><!----> <span class="site-name">Sciter优化文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sciterDocs/css/css_properties_map.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/Dom/Element.html" class="nav-link">
  Dom类
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/tiscript/tiscript_article.html" class="nav-link">
  脚本(TIScript)
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/runtime/Global.html" class="nav-link">
  脚本运行时
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/js/buttonClass.html" class="nav-link">
  行为
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/store/Formation.html" class="nav-link">
  脚本库
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/js_csss/csss.html" class="nav-link router-link-exact-active router-link-active">
  脚本(CSSS!)
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/other/standalone_Sciter_executable.html" class="nav-link">
  其他内容
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/localApi/window.html" class="nav-link">
  本地API
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sciterDocs/css/css_properties_map.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/Dom/Element.html" class="nav-link">
  Dom类
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/tiscript/tiscript_article.html" class="nav-link">
  脚本(TIScript)
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/runtime/Global.html" class="nav-link">
  脚本运行时
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/js/buttonClass.html" class="nav-link">
  行为
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/store/Formation.html" class="nav-link">
  脚本库
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/js_csss/csss.html" class="nav-link router-link-exact-active router-link-active">
  脚本(CSSS!)
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/other/standalone_Sciter_executable.html" class="nav-link">
  其他内容
</a></li><li class="dropdown-item"><!----> <a href="/sciterDocs/localApi/window.html" class="nav-link">
  本地API
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/sciterDocs/js_csss/csss.html" class="active sidebar-link">CSSS!脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sciterDocs/js_csss/csss.html#csss-css脚本-语言" class="sidebar-link">CSSS!(CSS脚本)语言</a></li></ul></li><li><a href="/sciterDocs/js_csss/csss_events.html" class="sidebar-link">CSSS!事件</a></li><li><a href="/sciterDocs/js_csss/csss_calc_function.html" class="sidebar-link">CSSS!的calc函数</a></li><li><a href="/sciterDocs/js_csss/csss_dom_object.html" class="sidebar-link">CSSS!的DOM对象</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="csss-脚本"><a href="#csss-脚本" class="header-anchor">#</a> CSSS!脚本</h1> <h2 id="csss-css脚本-语言"><a href="#csss-css脚本-语言" class="header-anchor">#</a> CSSS!(CSS脚本)语言</h2> <h3 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h3> <p>CSSS!是对传统的CSS(层叠样式表)的脚本化扩展，它使CSS有了可以给某些元素定义一些基本行为样式。</p> <div>CSSS!可以出现在:
    <ul><li>a) 属性名以'!'结尾的标记;</li> <li>b) 在<a href="csss!-calc-function.htm"><code>calc()</code></a>函数内部。</li></ul></div> <p>这里是h-smile引擎支持的<a href="csss!-events.htm">CSS属性的有效规则列表。</a></p> <p>示例, 下面这个是&lt; label for=&quot;id&quot;&gt; 的一个功能实现，这个功能也可以适用定义了for=&quot;id&quot;属性的元素:</p> <pre><code>   [for]
   {
     hover-on!  : $1(#&lt; self.for &gt;):hover = true;
     hover-off! : $1(#&lt; self.for &gt;):hover = false;
     active-on! : $1(#&lt; self.for &gt;):focus = true;
     cursor:pointer;
   }
   input:hover
   {
     outline: 4px glow blue 1px;
   }
</code></pre> <p><code>hover-on</code>和<code>hover-off</code>规则使label的绑定元素获取<em>:hover</em>状态。所以当鼠标悬停在label上时等同于停留在绑定元素上。<code>active-on!:</code>规则使绑定元素获取焦点。</p> <p><code>$1(...)</code>的含义参见下面的<em>Selector pseudo-functions</em>章节。</p> <h3 id="csss-语法"><a href="#csss-语法" class="header-anchor">#</a> CSSS!语法</h3> <p>CSSS!嵌入到宿主CSS语法中。CSSS!中使用标识符/构造器有些限制，CSSS!语句中不能使用';'、'{'和'}'标识符。';'标识符作为CSSS!脚本的结束标志。</p> <h3>标识符</h3> <p>标识符(nmtokens)以字母、'-'、'_'或'$'字符开头，后面跟着一些字母、'-'、'_'、'$'或数字([0-9])。注意'-'标识符, 因为是CSS语法，所以这个字符也可以作为名称的一部分。为了解决与减号'-'的冲突，减号两边必须有空格符。</p> <pre class="code"><code>nmtoken -&gt; [a-zA-Z_\-$]+[a-zA-Z_\-$0-9]*
</code></pre> <h3>关键字</h3> <p>CSSS!可以有以下关键字:</p> <pre><code>true   false   null   self
</code></pre> <h3><a name="operators" id="operators">操作符</a></h3> <pre class="code"><code>&lt;     &gt;     &lt;=    ==    !=    &gt;=    &amp;&amp;    ||
+     -     *     /     %     ^     |     &amp;
</code></pre> <p>[tbd]</p> <p>下个版本要支持的操作符:</p> <pre><code>~=    ~/    ~%    %~    /~
</code></pre> <p>三元操作符: </p> <pre><code>&lt;条件&gt; <strong>?</strong> &lt;true-部分&gt; [ <strong>#</strong> &lt;false-部分&gt; ]
</code></pre> <p>注意，三元操作符可以作为条件语句(if ... then ... else ...):</p> <code>self:value &gt; 12 ?( self:current = true, self.scroll-to-view())</code>; - 如果<em>self</em>元素的valueֵ值大于12，则设置self为当前元素，并将该元素滚动到视图。
  <h3>数据类型</h3> <p>CSSS!是一种无类型语言。所有变量可以设置下面的这些类型的值:</p> <ul><li>null - 无值;</li> <li><em>boolean</em> 有两个值: true和false;</li> <li><em>integer</em> - 32位有符号整数;</li> <li><em>float</em> - 64位浮点数;</li> <li><em>string</em> - UNICODE字符串;</li> <li><em>object</em> - DOM元素的引用;</li> <li><em>object-set</em> - 特别的对象，它表示一个DOM元素集合。$()函数返回这样的值。</li> <li><em>function-reference</em> - CSSS!中声明的函数引用。</li></ul> <p>不支持聚合类型(如数组)。</p> <h3>字面值</h3> <p>接受整数、浮点数、字符串、<strong>长度单位</strong>和正则表达式:</p> <pre class="code"><code>整数描述 -&gt; [0-9]+ | '0x' [0-9A-Fa-f]+ | ''' 字符 ''' | key-code-literal
  浮点数描述 -&gt; [0-9]+ '.' [0-9]+
  浮点数描述 -&gt; [0-9]+ '.' 'e'|'E' '+'|'-' [0-9]+
  字符串描述 -&gt; '&quot;' [.]* '&quot;'
  正则表达式描述 -&gt; '/' &lt;单行正则表达式&gt; ['/ig'] ';'
  长度单位描述 -&gt; &lt;整数描述&gt; | &lt;浮点数描述&gt; 后面立即跟着:
                   'pt' | 'px' | 'pc' | '%' | 'em' | 'ex' | 'in' | 'cm' | 'mm'
</code></pre> <p><em>Key-code-literal</em>是以单引号括住的字符串，可以为以下值:</p> <code>'RETURN' | 'LEFT' | 'RIGHT' | 'UP' | 'DOWN' | 'PRIOR' | 'NEXT' | 'TAB' | 'HOME' | 'END' | 'DELETE' | 'INSERT' | 'BACK'</code> <p>要定义类似Ctrl+X的组合键，请在按键的预定义名称前以'^'字符开头。</p> <p>示例:</p> <pre class="code"><code>            34 - 整数
    0xAFED1234 - 整数
          1.52 - 浮点数
          1.e2 - 浮点数
         1.e-2 - 浮点数
&quot;Hello world!&quot; - 字符串
          12pt - 长度值，这是表示12像素
           'A' - 字符'A'的代码, 整数
</code></pre><em>key-code-literal</em>的数量s:
  <pre><code>key-on!:
  key-code() == '^A'? ... # // 按下Ctrl+A
  key-code() == '^NEXT'? ... ; // 按下Ctrl+PgDown
</code></pre> <h3><a name="comments" id="comments">注释</a></h3> <p>注释是一个被编译器忽略的字符序列。有两种类型的注释:</p> <ul>单行注释:</ul> <pre class="code"><code>'//' &lt;text-no-crlf&gt; end-of-line
</code></pre> <ul>多行注释:</ul> <pre class="code"><code>'/*' &lt;text&gt; '*/'
</code></pre> <h3 id="语句"><a href="#语句" class="header-anchor">#</a> 语句</h3> <p>CSSS!程序是一个由逗号(',')分隔的语句序列，并且脚本结尾以';'结束。CSSS!脚本支持以下语句:</p> <h4>赋值:</h4> <pre><code>&lt;左表达式&gt; '=' &lt;表达式&gt;.
</code></pre> <h4>声明变量:</h4> <pre><code>&lt;变量名&gt; <strong>'='</strong> &lt;表达式&gt;
</code></pre> <h4>语句块</h4> <p>语句块是一个以逗号分隔的表达式列表:</p> <pre><code><strong>'('</strong> &lt;表达式&gt; [, &lt;表达式&gt;]* <strong>')'</strong>
</code></pre> <p>语句块的值等于列表中最后一个表达式的值</p> <h4>条件语句</h4> <pre><code>&lt;逻辑表达式&gt; <strong>'?'</strong> &lt;当true时的表达式&gt; [ <strong>'#'</strong> &lt;当false时的表达式&gt; ]
</code></pre> <p>逻辑表达式用于求值，求值为true时，则对'?'右边的表达式进行求值，否则对'#'右边的表达式进行求值。'#'右边的部分可以省略。</p> <h4>循环</h4> <p>CSSS!不支持循环(不过提供了一种函数中的尾递归功能可以实现类似的功能)。</p> <h4>返回语句</h4> <p><code>return</code>语句用于函数中返回值:</p> <pre><code>return &lt;返回的值或表达式&gt;
</code></pre> <h4>For each枚举</h4> <pre><code>&lt;object-set&gt; <strong>'-&gt;'</strong> &lt;有一个参数的函数引用&gt;
</code></pre> <p>枚举用于为左边object-set中的每个元素调用一个函数。object-set由伪函数$()、$p()和$c()产生——满足括号中选择器的DOM元素集合。</p> <p>示例:</p> <pre><code>     input.number
     {
       value-changed! :
         total = 0,
         $(input.number) -&gt; @(el) total = total + el:value,
         $1(td#total):value = total;
     }
</code></pre> <p>上面的代码的含义:</p> <p>当一些<code>&lt;input class=&quot;number&quot;&gt;</code>元素的值修改时，做以下部分:</p> <ul><li>初始化total变量为0。</li> <li>声明函数<code>@(el) total = total + el:value</code>。</li> <li>为所有满足<code>input.number</code>选择器的DOM元素调用这个函数</li> <li>将total赋值给第一个满足<code>td#total</code>选择器的元素。</li></ul> <h4>DOM属性和状态访问</h4> <p>DOM元素的属性可以使用'.'语句来访问:</p> <pre><code>&lt;object-or-object-set&gt; '.' &lt;attribute-name&gt;
</code></pre> <p>示例, 对于<code>&lt;input type=&quot;text&quot;&gt;</code>元素，下面的代码:</p> <pre><code>t = self.type
</code></pre> <p>将会返回DOM元素名为&quot;type&quot;的属性的值(这里值是文本)，并且将它赋值给变量t。</p> <p>DOM元素的State字段(运行期值)可以通过下面的语句访问:</p> <pre><code>&lt;object-or-object-set&gt; ':' &lt;state-name&gt;
</code></pre> <p>其中，state-name是CSS可识别的一个状态标识的名称: :hover, :active, :link, :checked, :current等。</p> <h4>CSS属性访问</h4> <p>DOM元素的CSS属性可以通过'::'语句来访问:</p> <pre><code>&lt;object&gt; '::' &lt;css-attribute-name&gt;
</code></pre> <p>示例, 下面的计时器事件处理函数中将会逐渐时元素变得透明:</p> <pre><code>     timer!: self::opacity &lt; 1.0?
               self::opacity = self::opacity + 0.1 #
               return cancel;
</code></pre> <h3 id="self"><a href="#self" class="header-anchor">#</a> Self</h3> <p><code>self</code>关键字指代规则应用的<a href="csss!-dom-object.htm">对象(DOM元素)</a>。</p> <h3 id="cancel"><a href="#cancel" class="header-anchor">#</a> Cancel</h3> <p><code>cancel</code>关键字一个特殊值，用于return语句，用于运行期停止事件继续传播。</p> <h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <p>CSSS!只支持(故意的)匿名自定义函数。</p> <h4>函数声明</h4> <p>函数使用以下语句声明:</p> <pre><code>'@(' &lt;参数列表&gt; ')' &lt;语句&gt; | &lt;语句块&gt;
</code></pre> <p>其中，<code>&lt;参数列表&gt;</code>是一个以逗号分隔的名称列表。</p> <p>函数可以赋值给变量:</p> <pre><code>foo = @(p1, p2) p1 + p2, ...</code></pre> <pre><code>foo = @(p1, p2) (p1 + p2, ...), ...</code></pre> <p>声明的函数有p1和p2两个参数，和p1 + p2或(p1 + p2, ...)函数体，并且将函数引用赋值给foo变量。</p> <h4>函数调用</h4> <p>调用函数的语句为:</p> <pre><code>&lt;variable&gt; <strong>'('</strong> &lt;expression-1&gt; , ... &lt;expression-n&gt; <strong>')'</strong>
</code></pre> <p>示例, 下面的代码将会调用上面的foo函数，并且将函数的返回值设置到bar变量:</p> <pre><code>bar = foo(1,2)
</code></pre> <h3 id="全局函数"><a href="#全局函数" class="header-anchor">#</a> 全局函数</h3> <h3>选择器函数</h3> <p>有两个全局函数:</p> <ol><li><code><strong>$</strong>(selector)</code><strong> - </strong>全局选择元素，<code>:root</code>为文档的根元素。</li> <li><code><strong>$1</strong>(selector)</code> - returns <a href="csss!-dom-object.htm">object</a> - 匹配选择器的第一个元素。<code>:root</code>为文档的根元素。</li></ol> <p>$()函数返回一个选择的DOM元素的集合(可能为空)。$1()函数返回一个DOM元素——匹配选择器的第一个元素。</p> <p>选择器函数支持拼接值，格式为:<code>$( ... &lt;value&gt; ... )</code>, 其中，值包含'&lt;'和'&gt;括号。</p> <p>示例, 下面的语句:</p> <pre><code>ncol = 2, $( table td:nth-child(&lt; ncol &gt;)).some-attr = &quot;hi!&quot;;
</code></pre> <p>将会为所有满足<code>table td:nth-child(2)</code>选择器的元素的<em>some-attr</em>属性设置值为&quot;hi!&quot;。</p> <h3>其他函数</h3> <ul><li><code><strong>int</strong>(val)</code>- 转换val的值为整数;</li> <li><code><strong>float</strong>(val)</code>- 转换val的值为浮点数;</li> <li><code><strong>length</strong>(val)</code> - 转换val的值为length单位值;</li> <li><code><strong>min</strong>(val1, val2 ... valN)</code>- 返回参数中的最小值;</li> <li><code><strong>max</strong>(val1, val2 ... valN)</code>- 返回参数中的最大值;</li> <li><code><strong>limit</strong>(val, minval, maxval)</code> - 如果var在[minval...maxval]范围内则返回val，如果var小于minval则返回minval，否则返回maxval。</li></ul> <h3>String对象的属性和方法</h3> <ul><li><code><em>string</em><strong>.length</strong></code> - 属性, string对象的长度;</li> <li><code><em>string</em><strong>.toUpper()</strong></code> - 方法, 字符串的大写形式版本;</li> <li><code><em>string</em><strong>.toLower()</strong></code> - 方法, 字符串的小写形式版本;</li> <li><code><em>string</em><strong>.substr(</strong>start[, length = -1]<strong>)</strong></code> - 方法, 返回一个子字符串，如果length小于0，则返回字符串的其余部分。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/sciterDocs/js_csss/csss_events.html">
        CSSS!事件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/sciterDocs/assets/js/app.44b9e7e1.js" defer></script><script src="/sciterDocs/assets/js/2.e6e0d827.js" defer></script><script src="/sciterDocs/assets/js/52.da9c9fd9.js" defer></script>
  </body>
</html>
