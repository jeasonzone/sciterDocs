(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{211:function(e,t){e.exports="data:image/png;base64,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"},324:function(e,t,v){"use strict";v.r(t);var n=v(28),i=Object(n.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"上下文菜单"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#上下文菜单"}},[e._v("#")]),e._v(" 上下文菜单")]),e._v(" "),n("div",{staticClass:"post",attrs:{id:"post-41938"}},[n("h1",{staticClass:"storytitle"},[e._v("Sciter中的上下文菜单")]),e._v(" "),n("div",{staticClass:"storycontent"},[n("p",[e._v("上下文菜单是一个标准UI特性，为了支持它，Sciter提供了以下机制:")]),e._v(" "),n("ol",[n("li",[n("em",[e._v("context-menu")]),e._v("自定义CSS属性。它定义上下文菜单(通常是一个"),n("code",[e._v("<menu class=context>")]),e._v(")激活时的位置。")]),e._v(" "),n("li",[e._v("菜单的行为和关联的DOM事件。")]),e._v(" "),n("li",[e._v("上下文菜单激活和初始化机制。")])]),e._v(" "),n("p",[n("span",{attrs:{id:"more-41938"}})]),e._v(" "),n("h2",[n("code",[e._v("context-menu")]),e._v(" 样式属性")]),e._v(" "),n("p",[n("code",[e._v("context-menu")]),e._v("是Sciter特有的，它是一个非继承CSS属性，可以接受以下值:")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("none")]),e._v(" - 默认值, 元素没有上下文菜单;")]),e._v(" "),n("li",[n("code",[e._v("selector(...)")]),e._v(" - 定义一个选择器，它指向一个已存在DOM元素，这个元素被用作一个弹出菜单(通常它是一个"),n("code",[e._v("<menu class=context>")]),e._v("元素);")]),e._v(" "),n("li",[n("code",[e._v("url(...)")]),e._v(" - 定义包含菜单定义的HTML(片段)文件的URL。")])]),e._v(" "),n("p",[e._v("示例:  ")]),e._v(" "),n("pre",{staticClass:"brush: html;"},[n("code",[e._v('  <style>\n    div.bar { context-menu: selector(menu#foo); }\n    div.baz { context-menu: url(for-baz.htm); }\n  </style>\n  <div class="bar">有#foo上下文菜单</div> \n  <div class="baz">有for-baz.htm上下文菜单</div> \n  <menu class=context id="foo">\n    <caption>.bar元素的#foo菜单</caption>\n    <li id="i1">第一项</li>\n    <li id="i2">第二项</li>\n    <li id="i3">第三项</li>\n    <li id="i4">第四项</li>\n  </menu>\n')])]),e._v(" "),n("p",[n("img",{attrs:{align:"right",src:v(211),alt:"external-menu",width:"151",height:"170"}})]),e._v(" "),n("p",[e._v("声明的标记代码中有两个元素包含上下文菜单: ")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("<div class=bar>")]),e._v("   - 拥有"),n("code",[e._v("menu#foo")]),e._v("上下文菜单  ")]),e._v(" "),n("li",[n("code",[e._v("<div class=baz>")]),e._v("   - 的上下文菜单从for-baz.htm中加载HTML文档作为上下文菜单。")])]),e._v(" "),n("p",[e._v("for-baz.htm文档中的内容可以如下:")]),e._v(" "),n("pre",{staticClass:"brush: html;"},[n("code",[e._v('<menu>  \n  <caption>外部菜单:</caption>\n  <li id="mi1">第一项</li>\n  <li id="mi2">第二项</li>\n  <li id="mi3">第三项</li>\n  <li id="mi4">第四项</li>\n</menu>\n')])]),e._v(" "),n("h2",[e._v("behavior:menu和它的事件")]),e._v(" "),n("p",[e._v("默认情况下，每个"),n("code",[e._v("<menu class=context>")]),e._v("(或简写形式"),n("code",[e._v("<menu.context>")]),e._v(")都已绑定了"),n("code",[e._v("behavior:menu;")]),e._v("行为。")]),e._v(" "),n("p",[e._v("behavior:menu行为的主要目的就是要支持基本的菜单操作: ")]),e._v(" "),n("ul",[n("li",[e._v("导航，包括分层菜单导航;")]),e._v(" "),n("li",[e._v("生成菜单点击事件。")])]),e._v(" "),n("p",[e._v("当用户点击某个菜单项时，该行为会生成Event.MENU_ITEM_CLICK冒泡事件，事件包含以下值:")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("Event.target")]),e._v(" , DOM元素 - 点击的菜单项元素;")]),e._v(" "),n("li",[n("code",[e._v("Event.owner")]),e._v(", DOM元素 - 菜单的拥有者 - 即定义了context-menu的那个元素。")])]),e._v(" "),n("p",[e._v("MENU_ITEM_CLICK事件的传递使用特殊的冒泡规则: MENU_ITEM_CLICK事件不会被物理父元素接受，而是被菜单的[逻辑]拥有者(即该上下文菜单的拥有者)接收。")]),e._v(" "),n("p",[e._v("因此，为了处理菜单点击，你可以订阅下面的控制事件:")]),e._v(" "),n("pre",{staticClass:"brush: js;"},[n("code",[e._v('var elemWithMenu  = self.select("div.baz");\nelemWithMenu.onControlEvent = function(event) {\n  if( event.type == Event.Event.MENU_ITEM_CLICK )  {\n      var menu_item = event.target; \n      ...\n  }'),n("br"),e._v("}\n")])]),e._v(" "),n("p",[e._v("或者使用类似JQuery的机制:")]),e._v(" "),n("pre",{staticClass:"brush: js;"},[n("code",[e._v('elemWithMenu.subscribe("click", "menu > li", function(event) {\n   var menu_item = event.target;\n   var owner = event.owner;\n});\n')])]),e._v(" "),n("h2",[e._v("上下文菜单的激活与初始化")]),e._v(" "),n("p",[e._v("上下文菜单的激活起始于接收到WM_CONTEXTMENU(Microsoft Windows)或Right-Mouse-click(Mac OS X)。")]),e._v(" "),n("p",[e._v("当Sciter接收到上下文菜单激活请求时会做以下事情:")]),e._v(" "),n("ol",[n("li",[e._v("查找当前鼠标下面的元素或者获得焦点的元素(鼠标悬停的最顶层元素)，找到后向它发送Event.CONTEXT_MENU_REQUEST冒泡事件。")]),e._v(" "),n("ul",[n("li",[e._v("如果在父/子链上的某些元素处理了该事件(在事件处理器中返回"),n("em",[e._v("true ")]),e._v("),并且对某个已存在的元素设置了"),n("code",[e._v("element.source = someMenuElement")]),e._v("，则这个someMenuElement元素将被当做上下文菜单来使用。这种情况下，任何CSS中为该元素声明的context-menu都将被忽略。")]),e._v(" "),n("li",[e._v("如果Event.CONTEXT_MENU_REQUEST事件未被用户代码处理，则引擎将会在当前鼠标悬停的最顶层元素的父子链上检索context-menu声明来创建菜单。在链上的第一个声明了context-menu属性的元素将被作为菜单的拥有者，并且为它创建菜单。")])]),e._v(" "),n("li",[e._v("在显示菜单前的最后一个步骤，引擎将为菜单的拥有者及它的所有父元素发送Event.CONTEXT_MENU_SETUP冒泡事件，通过处理Event.CONTEXT_MENU_SETUP事件，菜单拥有者及它的所有容器可以动态修改菜单项。Event.CONTEXT_MENU_SETUP事件将会有以下参数:")]),e._v(" "),n("ul",[n("li",[e._v("event.target == 菜单拥有者元素;")]),e._v(" "),n("li",[e._v("event.source == 菜单元素。")])])]),e._v(" "),n("p",[e._v("请查看Sciter SDK中的菜单示例: /samples/menu/context-menu.htm")]),e._v(" "),n("p",[e._v("注意：Sciter中的上下文菜单可以包含任意的标记代码和样式。例如，上下文菜单的菜单项可以水平排列，或者可以包含"),n("code",[e._v("<input|text>")]),e._v("元素。")])])])])}),[],!1,null,null,null);t.default=i.exports}}]);