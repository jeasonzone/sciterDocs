(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{277:function(v,_,e){"use strict";e.r(_);var t=e(28),o=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"csss-脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csss-脚本"}},[v._v("#")]),v._v(" CSSS!脚本")]),v._v(" "),e("h2",{attrs:{id:"csss-css脚本-语言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csss-css脚本-语言"}},[v._v("#")]),v._v(" CSSS!(CSS脚本)语言")]),v._v(" "),e("h3",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[v._v("#")]),v._v(" 简介")]),v._v(" "),e("p",[v._v("CSSS!是对传统的CSS(层叠样式表)的脚本化扩展，它使CSS有了可以给某些元素定义一些基本行为样式。")]),v._v(" "),e("div",[v._v("CSSS!可以出现在:\n    "),e("ul",[e("li",[v._v("a) 属性名以'!'结尾的标记;")]),v._v(" "),e("li",[v._v("b) 在"),e("a",{attrs:{href:"csss!-calc-function.htm"}},[e("code",[v._v("calc()")])]),v._v("函数内部。")])])]),v._v(" "),e("p",[v._v("这里是h-smile引擎支持的"),e("a",{attrs:{href:"csss!-events.htm"}},[v._v("CSS属性的有效规则列表。")])]),v._v(" "),e("p",[v._v('示例, 下面这个是< label for="id"> 的一个功能实现，这个功能也可以适用定义了for="id"属性的元素:')]),v._v(" "),e("pre",[e("code",[v._v("   [for]\n   {\n     hover-on!  : $1(#< self.for >):hover = true;\n     hover-off! : $1(#< self.for >):hover = false;\n     active-on! : $1(#< self.for >):focus = true;\n     cursor:pointer;\n   }\n   input:hover\n   {\n     outline: 4px glow blue 1px;\n   }\n")])]),v._v(" "),e("p",[e("code",[v._v("hover-on")]),v._v("和"),e("code",[v._v("hover-off")]),v._v("规则使label的绑定元素获取"),e("em",[v._v(":hover")]),v._v("状态。所以当鼠标悬停在label上时等同于停留在绑定元素上。"),e("code",[v._v("active-on!:")]),v._v("规则使绑定元素获取焦点。")]),v._v(" "),e("p",[e("code",[v._v("$1(...)")]),v._v("的含义参见下面的"),e("em",[v._v("Selector pseudo-functions")]),v._v("章节。")]),v._v(" "),e("h3",{attrs:{id:"csss-语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csss-语法"}},[v._v("#")]),v._v(" CSSS!语法")]),v._v(" "),e("p",[v._v("CSSS!嵌入到宿主CSS语法中。CSSS!中使用标识符/构造器有些限制，CSSS!语句中不能使用';'、'{'和'}'标识符。';'标识符作为CSSS!脚本的结束标志。")]),v._v(" "),e("h3",[v._v("标识符")]),v._v(" "),e("p",[v._v("标识符(nmtokens)以字母、'-'、'_'或'$'字符开头，后面跟着一些字母、'-'、'_'、'$'或数字([0-9])。注意'-'标识符, 因为是CSS语法，所以这个字符也可以作为名称的一部分。为了解决与减号'-'的冲突，减号两边必须有空格符。")]),v._v(" "),e("pre",{staticClass:"code"},[e("code",[v._v("nmtoken -> [a-zA-Z_\\-$]+[a-zA-Z_\\-$0-9]*\n")])]),v._v(" "),e("h3",[v._v("关键字")]),v._v(" "),e("p",[v._v("CSSS!可以有以下关键字:")]),v._v(" "),e("pre",[e("code",[v._v("true   false   null   self\n")])]),v._v(" "),e("h3",[e("a",{attrs:{name:"operators",id:"operators"}},[v._v("操作符")])]),v._v(" "),e("pre",{staticClass:"code"},[e("code",[v._v("<     >     <=    ==    !=    >=    &&    ||\n+     -     *     /     %     ^     |     &\n")])]),v._v(" "),e("p",[v._v("[tbd]")]),v._v(" "),e("p",[v._v("下个版本要支持的操作符:")]),v._v(" "),e("pre",[e("code",[v._v("~=    ~/    ~%    %~    /~\n")])]),v._v(" "),e("p",[v._v("三元操作符: ")]),v._v(" "),e("pre",[e("code",[v._v("<条件> "),e("strong",[v._v("?")]),v._v(" <true-部分> [ "),e("strong",[v._v("#")]),v._v(" <false-部分> ]\n")])]),v._v(" "),e("p",[v._v("注意，三元操作符可以作为条件语句(if ... then ... else ...):")]),v._v(" "),e("code",[v._v("self:value > 12 ?( self:current = true, self.scroll-to-view())")]),v._v("; - 如果"),e("em",[v._v("self")]),v._v("元素的valueֵ值大于12，则设置self为当前元素，并将该元素滚动到视图。\n  "),e("h3",[v._v("数据类型")]),v._v(" "),e("p",[v._v("CSSS!是一种无类型语言。所有变量可以设置下面的这些类型的值:")]),v._v(" "),e("ul",[e("li",[v._v("null - 无值;")]),v._v(" "),e("li",[e("em",[v._v("boolean")]),v._v(" 有两个值: true和false;")]),v._v(" "),e("li",[e("em",[v._v("integer")]),v._v(" - 32位有符号整数;")]),v._v(" "),e("li",[e("em",[v._v("float")]),v._v(" - 64位浮点数;")]),v._v(" "),e("li",[e("em",[v._v("string")]),v._v(" - UNICODE字符串;")]),v._v(" "),e("li",[e("em",[v._v("object")]),v._v(" - DOM元素的引用;")]),v._v(" "),e("li",[e("em",[v._v("object-set")]),v._v(" - 特别的对象，它表示一个DOM元素集合。$()函数返回这样的值。")]),v._v(" "),e("li",[e("em",[v._v("function-reference")]),v._v(" - CSSS!中声明的函数引用。")])]),v._v(" "),e("p",[v._v("不支持聚合类型(如数组)。")]),v._v(" "),e("h3",[v._v("字面值")]),v._v(" "),e("p",[v._v("接受整数、浮点数、字符串、"),e("strong",[v._v("长度单位")]),v._v("和正则表达式:")]),v._v(" "),e("pre",{staticClass:"code"},[e("code",[v._v("整数描述 -> [0-9]+ | '0x' [0-9A-Fa-f]+ | ''' 字符 ''' | key-code-literal\n  浮点数描述 -> [0-9]+ '.' [0-9]+\n  浮点数描述 -> [0-9]+ '.' 'e'|'E' '+'|'-' [0-9]+\n  字符串描述 -> '\"' [.]* '\"'\n  正则表达式描述 -> '/' <单行正则表达式> ['/ig'] ';'\n  长度单位描述 -> <整数描述> | <浮点数描述> 后面立即跟着:\n                   'pt' | 'px' | 'pc' | '%' | 'em' | 'ex' | 'in' | 'cm' | 'mm'\n")])]),v._v(" "),e("p",[e("em",[v._v("Key-code-literal")]),v._v("是以单引号括住的字符串，可以为以下值:")]),v._v(" "),e("code",[v._v("'RETURN' | 'LEFT' | 'RIGHT' | 'UP' | 'DOWN' | 'PRIOR' | 'NEXT' | 'TAB' | 'HOME' | 'END' | 'DELETE' | 'INSERT' | 'BACK'")]),v._v(" "),e("p",[v._v("要定义类似Ctrl+X的组合键，请在按键的预定义名称前以'^'字符开头。")]),v._v(" "),e("p",[v._v("示例:")]),v._v(" "),e("pre",{staticClass:"code"},[e("code",[v._v("            34 - 整数\n    0xAFED1234 - 整数\n          1.52 - 浮点数\n          1.e2 - 浮点数\n         1.e-2 - 浮点数\n\"Hello world!\" - 字符串\n          12pt - 长度值，这是表示12像素\n           'A' - 字符'A'的代码, 整数\n")])]),e("em",[v._v("key-code-literal")]),v._v("的数量s:\n  "),e("pre",[e("code",[v._v("key-on!:\n  key-code() == '^A'? ... # // 按下Ctrl+A\n  key-code() == '^NEXT'? ... ; // 按下Ctrl+PgDown\n")])]),v._v(" "),e("h3",[e("a",{attrs:{name:"comments",id:"comments"}},[v._v("注释")])]),v._v(" "),e("p",[v._v("注释是一个被编译器忽略的字符序列。有两种类型的注释:")]),v._v(" "),e("ul",[v._v("单行注释:")]),v._v(" "),e("pre",{staticClass:"code"},[e("code",[v._v("'//' <text-no-crlf> end-of-line\n")])]),v._v(" "),e("ul",[v._v("多行注释:")]),v._v(" "),e("pre",{staticClass:"code"},[e("code",[v._v("'/*' <text> '*/'\n")])]),v._v(" "),e("h3",{attrs:{id:"语句"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语句"}},[v._v("#")]),v._v(" 语句")]),v._v(" "),e("p",[v._v("CSSS!程序是一个由逗号(',')分隔的语句序列，并且脚本结尾以';'结束。CSSS!脚本支持以下语句:")]),v._v(" "),e("h4",[v._v("赋值:")]),v._v(" "),e("pre",[e("code",[v._v("<左表达式> '=' <表达式>.\n")])]),v._v(" "),e("h4",[v._v("声明变量:")]),v._v(" "),e("pre",[e("code",[v._v("<变量名> "),e("strong",[v._v("'='")]),v._v(" <表达式>\n")])]),v._v(" "),e("h4",[v._v("语句块")]),v._v(" "),e("p",[v._v("语句块是一个以逗号分隔的表达式列表:")]),v._v(" "),e("pre",[e("code",[e("strong",[v._v("'('")]),v._v(" <表达式> [, <表达式>]* "),e("strong",[v._v("')'")]),v._v("\n")])]),v._v(" "),e("p",[v._v("语句块的值等于列表中最后一个表达式的值")]),v._v(" "),e("h4",[v._v("条件语句")]),v._v(" "),e("pre",[e("code",[v._v("<逻辑表达式> "),e("strong",[v._v("'?'")]),v._v(" <当true时的表达式> [ "),e("strong",[v._v("'#'")]),v._v(" <当false时的表达式> ]\n")])]),v._v(" "),e("p",[v._v("逻辑表达式用于求值，求值为true时，则对'?'右边的表达式进行求值，否则对'#'右边的表达式进行求值。'#'右边的部分可以省略。")]),v._v(" "),e("h4",[v._v("循环")]),v._v(" "),e("p",[v._v("CSSS!不支持循环(不过提供了一种函数中的尾递归功能可以实现类似的功能)。")]),v._v(" "),e("h4",[v._v("返回语句")]),v._v(" "),e("p",[e("code",[v._v("return")]),v._v("语句用于函数中返回值:")]),v._v(" "),e("pre",[e("code",[v._v("return <返回的值或表达式>\n")])]),v._v(" "),e("h4",[v._v("For each枚举")]),v._v(" "),e("pre",[e("code",[v._v("<object-set> "),e("strong",[v._v("'->'")]),v._v(" <有一个参数的函数引用>\n")])]),v._v(" "),e("p",[v._v("枚举用于为左边object-set中的每个元素调用一个函数。object-set由伪函数$()、$p()和$c()产生——满足括号中选择器的DOM元素集合。")]),v._v(" "),e("p",[v._v("示例:")]),v._v(" "),e("pre",[e("code",[v._v("     input.number\n     {\n       value-changed! :\n         total = 0,\n         $(input.number) -> @(el) total = total + el:value,\n         $1(td#total):value = total;\n     }\n")])]),v._v(" "),e("p",[v._v("上面的代码的含义:")]),v._v(" "),e("p",[v._v("当一些"),e("code",[v._v('<input class="number">')]),v._v("元素的值修改时，做以下部分:")]),v._v(" "),e("ul",[e("li",[v._v("初始化total变量为0。")]),v._v(" "),e("li",[v._v("声明函数"),e("code",[v._v("@(el) total = total + el:value")]),v._v("。")]),v._v(" "),e("li",[v._v("为所有满足"),e("code",[v._v("input.number")]),v._v("选择器的DOM元素调用这个函数")]),v._v(" "),e("li",[v._v("将total赋值给第一个满足"),e("code",[v._v("td#total")]),v._v("选择器的元素。")])]),v._v(" "),e("h4",[v._v("DOM属性和状态访问")]),v._v(" "),e("p",[v._v("DOM元素的属性可以使用'.'语句来访问:")]),v._v(" "),e("pre",[e("code",[v._v("<object-or-object-set> '.' <attribute-name>\n")])]),v._v(" "),e("p",[v._v("示例, 对于"),e("code",[v._v('<input type="text">')]),v._v("元素，下面的代码:")]),v._v(" "),e("pre",[e("code",[v._v("t = self.type\n")])]),v._v(" "),e("p",[v._v('将会返回DOM元素名为"type"的属性的值(这里值是文本)，并且将它赋值给变量t。')]),v._v(" "),e("p",[v._v("DOM元素的State字段(运行期值)可以通过下面的语句访问:")]),v._v(" "),e("pre",[e("code",[v._v("<object-or-object-set> ':' <state-name>\n")])]),v._v(" "),e("p",[v._v("其中，state-name是CSS可识别的一个状态标识的名称: :hover, :active, :link, :checked, :current等。")]),v._v(" "),e("h4",[v._v("CSS属性访问")]),v._v(" "),e("p",[v._v("DOM元素的CSS属性可以通过'::'语句来访问:")]),v._v(" "),e("pre",[e("code",[v._v("<object> '::' <css-attribute-name>\n")])]),v._v(" "),e("p",[v._v("示例, 下面的计时器事件处理函数中将会逐渐时元素变得透明:")]),v._v(" "),e("pre",[e("code",[v._v("     timer!: self::opacity < 1.0?\n               self::opacity = self::opacity + 0.1 #\n               return cancel;\n")])]),v._v(" "),e("h3",{attrs:{id:"self"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#self"}},[v._v("#")]),v._v(" Self")]),v._v(" "),e("p",[e("code",[v._v("self")]),v._v("关键字指代规则应用的"),e("a",{attrs:{href:"csss!-dom-object.htm"}},[v._v("对象(DOM元素)")]),v._v("。")]),v._v(" "),e("h3",{attrs:{id:"cancel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cancel"}},[v._v("#")]),v._v(" Cancel")]),v._v(" "),e("p",[e("code",[v._v("cancel")]),v._v("关键字一个特殊值，用于return语句，用于运行期停止事件继续传播。")]),v._v(" "),e("h3",{attrs:{id:"函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[v._v("#")]),v._v(" 函数")]),v._v(" "),e("p",[v._v("CSSS!只支持(故意的)匿名自定义函数。")]),v._v(" "),e("h4",[v._v("函数声明")]),v._v(" "),e("p",[v._v("函数使用以下语句声明:")]),v._v(" "),e("pre",[e("code",[v._v("'@(' <参数列表> ')' <语句> | <语句块>\n")])]),v._v(" "),e("p",[v._v("其中，"),e("code",[v._v("<参数列表>")]),v._v("是一个以逗号分隔的名称列表。")]),v._v(" "),e("p",[v._v("函数可以赋值给变量:")]),v._v(" "),e("pre",[e("code",[v._v("foo = @(p1, p2) p1 + p2, ...")])]),v._v(" "),e("pre",[e("code",[v._v("foo = @(p1, p2) (p1 + p2, ...), ...")])]),v._v(" "),e("p",[v._v("声明的函数有p1和p2两个参数，和p1 + p2或(p1 + p2, ...)函数体，并且将函数引用赋值给foo变量。")]),v._v(" "),e("h4",[v._v("函数调用")]),v._v(" "),e("p",[v._v("调用函数的语句为:")]),v._v(" "),e("pre",[e("code",[v._v("<variable> "),e("strong",[v._v("'('")]),v._v(" <expression-1> , ... <expression-n> "),e("strong",[v._v("')'")]),v._v("\n")])]),v._v(" "),e("p",[v._v("示例, 下面的代码将会调用上面的foo函数，并且将函数的返回值设置到bar变量:")]),v._v(" "),e("pre",[e("code",[v._v("bar = foo(1,2)\n")])]),v._v(" "),e("h3",{attrs:{id:"全局函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局函数"}},[v._v("#")]),v._v(" 全局函数")]),v._v(" "),e("h3",[v._v("选择器函数")]),v._v(" "),e("p",[v._v("有两个全局函数:")]),v._v(" "),e("ol",[e("li",[e("code",[e("strong",[v._v("$")]),v._v("(selector)")]),e("strong",[v._v(" - ")]),v._v("全局选择元素，"),e("code",[v._v(":root")]),v._v("为文档的根元素。")]),v._v(" "),e("li",[e("code",[e("strong",[v._v("$1")]),v._v("(selector)")]),v._v(" - returns "),e("a",{attrs:{href:"csss!-dom-object.htm"}},[v._v("object")]),v._v(" - 匹配选择器的第一个元素。"),e("code",[v._v(":root")]),v._v("为文档的根元素。")])]),v._v(" "),e("p",[v._v("$()函数返回一个选择的DOM元素的集合(可能为空)。$1()函数返回一个DOM元素——匹配选择器的第一个元素。")]),v._v(" "),e("p",[v._v("选择器函数支持拼接值，格式为:"),e("code",[v._v("$( ... <value> ... )")]),v._v(", 其中，值包含'<'和'>括号。")]),v._v(" "),e("p",[v._v("示例, 下面的语句:")]),v._v(" "),e("pre",[e("code",[v._v('ncol = 2, $( table td:nth-child(< ncol >)).some-attr = "hi!";\n')])]),v._v(" "),e("p",[v._v("将会为所有满足"),e("code",[v._v("table td:nth-child(2)")]),v._v("选择器的元素的"),e("em",[v._v("some-attr")]),v._v('属性设置值为"hi!"。')]),v._v(" "),e("h3",[v._v("其他函数")]),v._v(" "),e("ul",[e("li",[e("code",[e("strong",[v._v("int")]),v._v("(val)")]),v._v("- 转换val的值为整数;")]),v._v(" "),e("li",[e("code",[e("strong",[v._v("float")]),v._v("(val)")]),v._v("- 转换val的值为浮点数;")]),v._v(" "),e("li",[e("code",[e("strong",[v._v("length")]),v._v("(val)")]),v._v(" - 转换val的值为length单位值;")]),v._v(" "),e("li",[e("code",[e("strong",[v._v("min")]),v._v("(val1, val2 ... valN)")]),v._v("- 返回参数中的最小值;")]),v._v(" "),e("li",[e("code",[e("strong",[v._v("max")]),v._v("(val1, val2 ... valN)")]),v._v("- 返回参数中的最大值;")]),v._v(" "),e("li",[e("code",[e("strong",[v._v("limit")]),v._v("(val, minval, maxval)")]),v._v(" - 如果var在[minval...maxval]范围内则返回val，如果var小于minval则返回minval，否则返回maxval。")])]),v._v(" "),e("h3",[v._v("String对象的属性和方法")]),v._v(" "),e("ul",[e("li",[e("code",[e("em",[v._v("string")]),e("strong",[v._v(".length")])]),v._v(" - 属性, string对象的长度;")]),v._v(" "),e("li",[e("code",[e("em",[v._v("string")]),e("strong",[v._v(".toUpper()")])]),v._v(" - 方法, 字符串的大写形式版本;")]),v._v(" "),e("li",[e("code",[e("em",[v._v("string")]),e("strong",[v._v(".toLower()")])]),v._v(" - 方法, 字符串的小写形式版本;")]),v._v(" "),e("li",[e("code",[e("em",[v._v("string")]),e("strong",[v._v(".substr(")]),v._v("start[, length = -1]"),e("strong",[v._v(")")])]),v._v(" - 方法, 返回一个子字符串，如果length小于0，则返回字符串的其余部分。")])])])}),[],!1,null,null,null);_.default=o.exports}}]);